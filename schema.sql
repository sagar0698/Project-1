--$ sqlite3 data.db .dump > schema.sql
PRAGMA foreign_keys=ON;
BEGIN TRANSACTION;


DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS FOLLOW;
DROP TABLE IF EXISTS TWEETS;


/* Create a table called USERS */
CREATE TABLE USERS(
    PK_USERNAME VARCHAR PRIMARY KEY, 
    EMAIL VARCHAR NOT NULL, 
    PASSWORD VARCHAR NOT NULL
);


/* Create few records in this table */
INSERT INTO USERS VALUES('a', 'a@a.com', 'a');
INSERT INTO USERS VALUES('b', 'b@b.com', 'b');
INSERT INTO USERS VALUES('c', 'c@c.com', 'c');
INSERT INTO USERS VALUES('d', 'd@d.com', 'd');
INSERT INTO USERS VALUES('e', 'e@e.com', 'e');
INSERT INTO USERS VALUES('f', 'f@f.com', 'f');


/* Create a table called FOLLOW */
CREATE TABLE FOLLOW(
    FOLLOWERS VARCHAR NOT NULL, 
    FK_USER VARCHAR NOT NULL,
    FOREIGN KEY(FK_USER) REFERENCES USERS(PK_USERNAME)
);


/* Create few records in this table */
INSERT INTO FOLLOW VALUES('b', 'a');
INSERT INTO FOLLOW VALUES('c', 'a');
INSERT INTO FOLLOW VALUES('d','a');
INSERT INTO FOLLOW VALUES('a','b');
INSERT INTO FOLLOW VALUES('c','b');
INSERT INTO FOLLOW VALUES('a','c');
INSERT INTO FOLLOW VALUES('e','d');
INSERT INTO FOLLOW VALUES('f','d');


/* Create a table called TWEETS */
CREATE TABLE TWEETS(
    TWEET TEXT NOT NULL, 
    DAY_OF VARCHAR NOT NULL,
    FK_USERS VARCHAR NOT NULL,
    FOREIGN KEY(FK_USERS) REFERENCES USERS(PK_USERNAME)
);


INSERT INTO TWEETS VALUES('2hello all', '2020-10-05 10:37:00', 'a');
INSERT INTO TWEETS VALUES('8goodbye all', '2020-05-05 23:59:59', 'a');
INSERT INTO TWEETS VALUES('7b is cool', '2020-09-28 05:58:59', 'b');
INSERT INTO TWEETS VALUES('9b is wack', '2019-10-05 14:12:35', 'c');
INSERT INTO TWEETS VALUES('4c is cool', '2020-10-04 17:12:35', 'c');
INSERT INTO TWEETS VALUES('12my time machine worked', '2059-10-05 14:12:35', 'e');
INSERT INTO TWEETS VALUES('1hello a', '2020-10-05 14:12:35', 'd');
INSERT INTO TWEETS VALUES('10d is best', '2014-10-05 14:12:35', 'd');
INSERT INTO TWEETS VALUES('6microblogging service similar to twitter', '2020-10-01 01:43:16', 'e');
INSERT INTO TWEETS VALUES('3making them api', '2020-10-04 17:12:36', 'e');
INSERT INTO TWEETS VALUES('5who following me', '2020-10-04 17:12:34', 'e');
INSERT INTO TWEETS VALUES('11how i get to 1924', '1924-10-05 14:12:35', 'f');


COMMIT;
